---
title: "requirements.txt"
---

# requirements.txt

## Introduction

The `requirements.txt` file is the standard way to declare Python project dependencies. It enables reproducible environments and easy dependency installation.

### What We'll Cover

- Format and syntax
- Version pinning strategies
- Development dependencies
- pip-tools for management

### Prerequisites

- pip basics
- Virtual environments

---

## Basic Format

### Simple requirements.txt

```txt
# Core dependencies
requests
numpy
pandas

# With versions
flask==2.3.0
sqlalchemy>=2.0.0
```

### Comments and Blank Lines

```txt
# Database
psycopg2-binary==2.9.9
sqlalchemy>=2.0.0

# API Framework
flask==2.3.0
flask-cors==4.0.0

# Data Processing
pandas>=2.0.0
numpy>=1.24.0
```

---

## Version Specifiers

### Exact Version (Pinning)

```txt
# Exact version - most reproducible
requests==2.31.0
```

### Minimum Version

```txt
# At least this version
requests>=2.28.0
```

### Maximum Version

```txt
# No higher than this
requests<3.0.0
```

### Version Range

```txt
# Between versions
requests>=2.28.0,<3.0.0
```

### Compatible Release

```txt
# Compatible with (same major.minor, any patch)
requests~=2.31.0
# Equivalent to: >=2.31.0,<2.32.0

requests~=2.31
# Equivalent to: >=2.31,<3.0
```

### Excluding Versions

```txt
# Not this version
requests!=2.30.0
```

### Comparison Table

| Specifier | Meaning | Example Match |
|-----------|---------|---------------|
| `==2.31.0` | Exact | 2.31.0 only |
| `>=2.28.0` | At least | 2.28.0, 2.31.0, 3.0.0 |
| `<3.0.0` | Less than | 2.99.0, not 3.0.0 |
| `~=2.31.0` | Compatible | 2.31.0, 2.31.5 |
| `!=2.30.0` | Exclude | Anything except 2.30.0 |

---

## Pinning Strategies

### Strategy 1: Exact Pinning (Production)

```txt
# requirements.txt - Production
certifi==2024.2.2
charset-normalizer==3.3.2
idna==3.6
requests==2.31.0
urllib3==2.2.1
```

**Pros:** Fully reproducible, predictable behavior
**Cons:** Manual updates required, may miss security patches

### Strategy 2: Minimum Versions (Development)

```txt
# requirements.txt - Development
requests>=2.28.0
numpy>=1.24.0
pandas>=2.0.0
```

**Pros:** Gets latest compatible versions
**Cons:** Different installs may have different versions

### Strategy 3: Compatible Releases

```txt
# requirements.txt - Balanced
requests~=2.31.0
numpy~=1.26.0
pandas~=2.0.0
```

**Pros:** Bug fixes included, breaking changes excluded
**Cons:** May still have minor compatibility issues

---

## Multiple Requirements Files

### Separate Dev Dependencies

```
project/
├── requirements.txt          # Production dependencies
├── requirements-dev.txt      # Development dependencies
└── requirements-test.txt     # Test dependencies
```

### requirements.txt (Production)

```txt
# Core application dependencies
flask==2.3.0
sqlalchemy==2.0.25
redis==5.0.1
```

### requirements-dev.txt

```txt
# Include production deps
-r requirements.txt

# Development tools
black==24.2.0
isort==5.13.2
mypy==1.8.0
ipython==8.22.0
```

### requirements-test.txt

```txt
# Include dev deps (which includes prod)
-r requirements-dev.txt

# Testing frameworks
pytest==8.0.0
pytest-cov==4.1.0
pytest-asyncio==0.23.5
httpx==0.27.0  # For testing HTTP
```

### Installing Different Environments

```bash
# Production
pip install -r requirements.txt

# Development
pip install -r requirements-dev.txt

# Testing/CI
pip install -r requirements-test.txt
```

---

## Advanced Features

### Including Other Files

```txt
-r base-requirements.txt
-r extra-requirements.txt
```

### Installing from URLs

```txt
# From GitHub
git+https://github.com/user/repo.git@v1.0.0

# From URL
https://example.com/package-1.0.0.tar.gz
```

### Editable Installs

```txt
# Install local package in development mode
-e .
-e ../shared-library
-e git+https://github.com/user/repo.git#egg=package
```

### Index URLs

```txt
--index-url https://pypi.org/simple
--extra-index-url https://private.pypi.org/simple

package-name==1.0.0
```

### Hashes for Security

```txt
requests==2.31.0 \
    --hash=sha256:942c5a758f98d790eaed1a29cb6eefc7ffb0d1cf7af05c3d2791656dbd6ad1e1

numpy==1.26.4 \
    --hash=sha256:1e11668d6f756ca5ef534b5be8653d16c5352cbb210a5c2a79ff288e937d3c6d
```

---

## pip-tools for Management

### Installation

```bash
pip install pip-tools
```

### Workflow

```bash
# 1. Create requirements.in with loose requirements
cat > requirements.in << EOF
flask>=2.0
sqlalchemy>=2.0
redis
EOF

# 2. Compile to exact versions
pip-compile requirements.in
# Creates requirements.txt with pinned versions

# 3. Sync environment
pip-sync requirements.txt
```

### Generated requirements.txt

```txt
# This file is autogenerated by pip-compile
# Do not edit manually!

blinker==1.7.0
    # via flask
click==8.1.7
    # via flask
flask==3.0.2
    # via -r requirements.in
itsdangerous==2.1.2
    # via flask
jinja2==3.1.3
    # via flask
markupsafe==2.1.5
    # via
    #   jinja2
    #   werkzeug
...
```

### Separate Dev Requirements

```bash
# requirements-dev.in
-r requirements.in
pytest
black
mypy

# Compile
pip-compile requirements-dev.in
```

---

## Best Practices

### 1. Always Pin for Production

```txt
# ✅ Good for production
requests==2.31.0
numpy==1.26.4

# ❌ Bad for production
requests
numpy>=1.0
```

### 2. Document Why Versions Are Pinned

```txt
# Pinned to 2.31.0 due to bug in 2.32.0
requests==2.31.0

# Latest stable as of 2024-03
numpy==1.26.4
```

### 3. Regularly Update Dependencies

```bash
# Check for outdated
pip list --outdated

# Or use pip-tools
pip-compile --upgrade requirements.in
```

### 4. Use Lock Files in Modern Projects

```bash
# pip-tools generates lock files
pip-compile --generate-hashes requirements.in

# Or use Poetry/pipenv for built-in lock files
```

---

## Hands-on Exercise

### Your Task

```bash
# Create a proper requirements setup:
# 1. Create requirements.in with loose versions
# 2. Compile to requirements.txt with pip-tools
# 3. Create requirements-dev.in for dev dependencies
# 4. Test the workflow
```

<details>
<summary>✅ Solution</summary>

```bash
# Setup
python -m venv .venv
source .venv/bin/activate
pip install pip-tools

# 1. Create requirements.in
cat > requirements.in << EOF
# Web framework
flask>=2.0

# HTTP client
httpx>=0.24

# Data handling
pydantic>=2.0
EOF

# 2. Compile to pinned versions
pip-compile requirements.in

# View generated file
cat requirements.txt

# 3. Create dev requirements
cat > requirements-dev.in << EOF
# Include production deps
-r requirements.in

# Development tools
pytest>=7.0
black>=23.0
mypy>=1.0
ipython>=8.0
EOF

# Compile dev requirements
pip-compile requirements-dev.in

# 4. Install and test
pip-sync requirements-dev.txt

# Verify
pip list
python -c "import flask, httpx, pytest; print('All imports work!')"

# Upgrade all dependencies
pip-compile --upgrade requirements.in
pip-compile --upgrade requirements-dev.in
```
</details>

---

## Summary

✅ **`==`** pins exact version (most reproducible)
✅ **`>=`** sets minimum version (flexible)
✅ **`~=`** allows compatible releases (balanced)
✅ **Separate files** for dev/test dependencies
✅ **pip-tools** generates pinned requirements from loose specs
✅ **Regularly update** dependencies for security

**Next:** [Conda Environments](./05-conda.md)

---

## Further Reading

- [pip Requirements File Format](https://pip.pypa.io/en/stable/reference/requirements-file-format/)
- [pip-tools Documentation](https://pip-tools.readthedocs.io/)

<!-- 
Sources Consulted:
- pip Documentation: https://pip.pypa.io/en/stable/reference/requirements-file-format/
-->
